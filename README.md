# Домашнее задание: Базы данных, их типы  **Шаров Олег**

## Задание 1. СУБД

### 1.1. Бюджетирование проектов с дальнейшим формированием финансовых аналитических отчётов и прогнозирования рисков

**Рекомендуемый тип СУБД:** Реляционная СУБД (SQL) — например, **PostgreSQL** или **Microsoft SQL Server**.

Финансовые данные требуют строгой схемы, ACID-гарантий, целостности ссылок и точных агрегаций. Реляционные СУБД отлично подходят для OLAP-нагрузок, особенно при использовании материализованных представлений, индексов и поддержки оконных функций.

#### 1.1.* Хеширование стало занимать длительное время — какое API можно использовать для ускорения?

Для ускорения хеширования можно использовать:
- **Redis** — для кэширования промежуточных хешей,
- **BLAKE3** или другие высокопроизводительные библиотеки хеширования через соответствующие API,
- Внутри PostgreSQL — **C-расширения** или **PL/Python** для ускорения вычислений,
- Либо перенести часть логики в **ClickHouse** при массовой аналитике.

---

### 1.2. Лендинги и CRM

**Рекомендуемый тип СУБД:** Документоориентированная NoSQL (например, **MongoDB**) — но оптимальнее использовать **PostgreSQL с JSONB**.

Лендинги генерируют разнородные данные, а CRM требует гибкости. PostgreSQL с колонкой типа `JSONB` даёт гибкость NoSQL и надёжность SQL в одной системе.

#### 1.2.* Можно ли закрыть задачу одной СУБД?

**Да.** Использовать **PostgreSQL с JSONB**: лиды хранятся в JSON-поле, CRM работает с реляционными таблицами и теми же данными. Поддержка GIN-индексов обеспечивает высокую скорость поиска.

---

### 1.3. База знаний по корпоративным нормам

**Рекомендуемый тип СУБД:** Простая реляционная СУБД — например, **PostgreSQL** или даже **SQLite**.

Структура статичная и иерархическая. Не требуется высокая нагрузка.

#### 1.3.* Можно ли использовать существующую СУБД?

**Да.** Если используется PostgreSQL (из п. 1.1 или 1.2), базу знаний можно реализовать в ней же: таблица с полями `id`, `parent_id`, `title`, `content`. Полноценный поиск — через `tsvector`.

---

### 1.4. Логистика: маршруты и доставка

**Рекомендуемый тип СУБД:** Графовая СУБД — например, **Neo4j**.

Задача — работа со связями и поиск кратчайших путей. Графовые СУБД делают это на порядки эффективнее реляционных.

#### 1.4.* Подключить отдел закупок?

Закупки — транзакционные данные, плохо ложатся на графы. Лучше хранить их в **PostgreSQL**, а в Neo4j — только логистические сущности, связывая через внешние ID. Альтернатива — использовать **pgRouting** или **Apache AGE** внутри PostgreSQL.

---

### 1.5.* Можно ли всё решить одной СУБД?

**Технически — да (PostgreSQL), но нецелесообразно.**

PostgreSQL может покрыть все сценарии благодаря:
- Реляционной модели (финансы),
- JSONB (лиды/CRM),
- `tsvector` (база знаний),
- PostGIS + pgRouting / Apache AGE (логистика).

**Однако** графовые операции будут медленнее, чем в Neo4j, а архитектура станет сложной.

**Вывод:** Использовать **полиглотную персистентность**:
- **PostgreSQL** — финансы, CRM, база знаний,
- **Neo4j** — логистика.

Это обеспечит максимальную эффективность и масштабируемость.
